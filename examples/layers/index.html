<html>
<head>
    <title>Modest Maps JS - Layer Sample</title>
    <script type="text/javascript" src="../../modestmaps.js"></script>
    <script type="text/javascript">
    // <!--
    
        var MM = com.modestmaps;
    
       /**
        * Possible new kind of provider that deals in elements.
        */
        var FakeProvider = function()
        {
            this.divs = {};
        }
        
        FakeProvider.prototype = {

            getTileElement: function(coord)
            {
                if(coord.toKey() in this.divs)
                {
                    return this.divs[coord.toKey()];
                }
                
                var div = document.createElement('div');
                div.innerHTML = coord.toKey();
                div.style.background = 'url(http://acetate.geoiq.com/tiles/terrain/{Z}/{X}/{Y}.png)'.replace('{Z}', coord.zoom.toFixed(0)).replace('{X}', coord.column.toFixed(0)).replace('{Y}', coord.row.toFixed(0));
                div.onmouseover = function() { this.style.fontWeight = 'bold'; };
                div.onmouseout = function() { this.style.fontWeight = 'normal'; };
                this.divs[coord.toKey()] = div;
                return div;
            },
            
            releaseTileElement: function(coord)
            {
                if(coord.toKey() in this.divs)
                {
                    delete this.divs[coord.toKey()];
                }
            }
        };
        
        MM.extend(FakeProvider, MM.MapProvider);
    
        function initMap()
        {
            var mm = com.modestmaps,
                //bg = new FakeProvider();
                bg = new mm.TemplatedMapProvider('http://acetate.geoiq.com/tiles/terrain/{Z}/{X}/{Y}.png');
                //bg = new mm.TilePaintingProvider('http://acetate.geoiq.com/tiles/terrain/{Z}/{X}/{Y}.png');
            
            var map = new mm.Map('map',  bg, new mm.Point(800, 390));
        
            map.setCenterZoom(new mm.Location(37.811530, -122.2666097), 13);
            
            console.log(['provider:', bg]);
        }

    // -->
    </script>
    <style type="text/css">

        div#map
        {
            width: 800px;
            height: 390px;
            border: 1px solid black;
        }

    </style>
</head>
<body onload="initMap()">
    <div id="map">
    </div>
</body>
</html>
